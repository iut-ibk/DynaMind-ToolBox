CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(dynamind)
ADD_DEFINITIONS(-DDYNAMIND_VERSION_CORE="0.2.1")
OPTION(WITH_TESTS "build unit tests" OFF)

FIND_PACKAGE(PythonLibs 2.7 REQUIRED)
FIND_PACKAGE(Qt4 COMPONENTS QtCore QtGui QtTest REQUIRED)


SET(QT_USE_QTXML TRUE)
SET(QT_USE_QTTEST TRUE)

INCLUDE(${QT_USE_FILE})

INCLUDE_DIRECTORIES(src/core src/python-swig ${QT_QTCORE_INCLUDE_DIR} ${PYTHON_INCLUDE_PATH})
FIND_PACKAGE(SWIG REQUIRED)
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})


IF(CMAKE_BUILD_TYPE STREQUAL Debug)
        MESSAGE(STATUS "Build Type = Debug")
        ADD_DEFINITIONS(-DDEBUG)
ELSE()
        MESSAGE(STATUS "Build Type = Release")
ENDIF()

IF(DYNAMIND_TOOLBOX_BUILD_DIR)
    SET(OUTPUT_DIR ${DYNAMIND_TOOLBOX_BUILD_DIR})
ELSE()
    SET(OUTPUT_DIR ${dynamind_BINARY_DIR})
ENDIF()

SET(LIBRARY_OUTPUT_PATH ${OUTPUT_DIR})
SET(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})
SET(SCRIPT_PATH ${OUTPUT_DIR}/PythonModules)

ADD_SUBDIRECTORY(src/core)
ADD_SUBDIRECTORY(src/python-swig)
ADD_SUBDIRECTORY(src/DMTestModules)
ADD_SUBDIRECTORY(src/DMToolboxes)
ADD_SUBDIRECTORY(scripts)
if (WITH_UNIT_TESTS)
ADD_SUBDIRECTORY(src/unit-test)
endif (WITH_UNIT_TESTS)

ADD_SUBDIRECTORY(CMake)

#INCLUDE(DynaMindCPack.txt)
